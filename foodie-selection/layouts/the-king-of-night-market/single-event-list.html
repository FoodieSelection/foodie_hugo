{{ define "ldjson" }}
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "{{ .Title }}",
      "description": "{{ .Params.description }}",
      "url": "{{ .Permalink }}",
      "image": "{{ .Site.BaseURL }}{{ .Params.image }}",
      "inLanguage": "zh-Hant",
      "datePublished": "{{ .Params.datePublished }}",
      "dateModified": "{{ .Params.dateModified }}",
      "publisher": {
        "@type": "Organization",
        "name": "{{ .Site.Title }}",
        "url": "{{ .Site.BaseURL }}",
        "logo": {
        "@type": "ImageObject",
        "url": "{{ .Site.BaseURL }}{{ .Site.Params.logo }}"
        }
      },
        "isPartOf": {
          "@type": "CollectionPage",
          "name": "{{ .Parent.Title }}",
          "url": "{{ .Parent.Permalink }}"
        },
        "mainEntity": {
          "@type": "ItemList",
          "name": "{{ .Title }}",
          "itemListElement": [
          {{ range $i, $event := .Params.events }}
            {
              "@type": "ListItem",
              "item": {
                "@type": "FoodEstablishment",
                "name": "{{ $event.name }}",
                "address": "{{ $event.address }}",
                "containedInPlace": {
                  "@type": "Place",
                  "name": "{{ $event.city }} {{ $event.nightMarket }}"
                },
                "award": "{{ $event.type }}",
                "rank": "{{ $event.rank }}",
                "sameAs": [
                  "{{ $event.google_map }}",
                  {{ if $event.footinder }}
                  "{{ $event.footinder }}"
                  {{ end }}
                ]
              }
            }
            {{ end }}
          ]
        }
      }          
</script>
{{ end }}

{{ define "main" }}
<header>
    <a class="header-btn" href="{{ .Site.BaseURL }}" aria-label="回首頁">
        <img src="{{ .Site.BaseURL }}{{ .Site.Params.logo }}" alt="回首頁">
    </a>
    <div class="header-title">{{ .Title }}</div>
    <div class="header-btn-placeholder"></div>
</header>
<main class="container">
    <section class="category-group">
        <div class="cards-grid">
            {{ range .Params.events }}
            <div class="card">
                <div class="card-content">
                    <div class="rank-badge">{{ .rank }}</div>
                    <div class="location">{{ .city }} {{ .nightMarket }}</div>
                    <div class="shop-name">{{ .name }}</div>
                    <div class="address">{{ .address }}</div>
                    <div class="card-actions">
                        <a href="{{ .google_map }}" target="_blank" rel="noopener">Google
                            Map</a>
                        {{ if .footinder }}
                        <a href="{{ .footinder }}" target="_blank"
                            rel="noopener">Footinder</a>
                        {{ end }}
                    </div>
                </div>
            </div>
            {{ end }}
        </div>
    </section>
</main>
{{ end }}