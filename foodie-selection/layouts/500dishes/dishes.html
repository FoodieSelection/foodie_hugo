{{ define "ldjson" }}
<script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebPage",
      "name": "2024年度全國500盤",
      "description": "收錄2024年度全台美食精選500盤，帶你發現台灣精緻料理。",
      "url": "https://foodie.selection.com.tw/nationwide/500dishes/2024-500dishes.html",
      "image": "https://foodie.selection.com.tw/logo512.png",
          "inLanguage": "zh-Hant",
          "datePublished": "2025-06-02",
          "dateModified": "2025-06-06",
          "publisher": {
            "@type": "Organization",
            "name": "吃貨精選-Foodie Selection",
            "url": "https://foodie.selection.com.tw/",
            "logo": {
            "@type": "ImageObject",
            "url": "https://foodie.selection.com.tw/logo512.png"
            }
          },
      "isPartOf": {
        "@type": "CollectionPage",
        "name": "全國美食500盤",
        "url": "https://foodie.selection.com.tw/nationwide/500dishes/500dishes.html"
      },
      "mainEntity": {
        "@type": "ItemList",
        "name": "2024年度全國500盤",
        "itemListElement": [
        {{ range $i, $restaurant := .Params.restaurants }}
        {{ if $i }},{{ end }}
          {
            "@type": "ListItem",
            "item": {
              "@type": "Restaurant",
              "name": {{ $restaurant.name }},
              "address": {{ $restaurant.address }},
              "sameAs": [
                {{ $restaurant.google_map }},
                {{ $restaurant.footinder }}
              ],
              "hasMenu": {
                "@type": "Menu",
                "name": "得獎菜單",
                "hasMenuSection": [
                  {
                    "@type": "MenuSection",
                    "name": "500盤得獎菜色",
                    "hasMenuItem": [
                    {{ range $i, $dishes := $restaurant.dishes }}
                    {{ if $i }},{{ end }}
                      {
                        "@type": "MenuItem",
                        "name": {{ $dishes.name }}
                      }
                    {{ end }}
                    ]
                  }
                ]
              }
            }
          }
        {{ end }}
        ]
      }
    }
  </script>
{{ end }}

{{ define "main" }}
<header>
    <a class="header-btn" href="{{ .Site.BaseURL }}">
        <img src="{{ .Site.BaseURL }}{{ .Site.Params.logo }}" alt="回首頁">
    </a>
    <div class="header-title">{{ .Title }}</div>
    <div class="header-btn-placeholder"></div>
</header>
<main>
    <section class="restaurant-list">
        {{ range .Params.restaurants }}
        <div class="restaurant">
            <div class="restaurant-info" tabindex="0">
                <div class="info-row1">
                    <span class="name-text">{{ .name }}</span>
                </div>
                <div class="info-row2">
                    {{ .address }}
                </div>
                <div class="info-row3">
                    <a class="info-btn" href="{{ .google_map }}" target="_blank" rel="noopener">Google
                        Map</a>
                    {{ if .footinder }}
                    <a class="info-btn" href="{{ .footinder }}" target="_blank" rel="noopener">Footinder</a>
                    {{ end }}
                    <span class="dropdown-icon" aria-hidden="true">
                        <svg width="22" height="22" viewBox="0 0 22 22">
                            <polyline points="6,9 11,14 16,9" fill="none" stroke="#d66616" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </span>
                </div>
            </div>
            <ul class="menu-list">
                {{ range .dishes }}
                <li>{{ .name }}</li>
                {{ end }}
            </ul>
        </div>
        {{ end }}
    </section>
</main>

<script>
    document.querySelectorAll('.restaurant-info').forEach(function (info) {
        info.addEventListener('click', function () {
            var parent = info.closest('.restaurant');
            parent.classList.toggle('open');
        });
        info.addEventListener('keydown', function (e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                var parent = info.closest('.restaurant');
                parent.classList.toggle('open');
            }
        });
    });
</script>
{{ end }}